{"version":3,"sources":["common.js"],"names":["minicart","$","click","ev","preventDefault","toggleClass","window","location","wishlist","hasClass","innerWidth","appendTo","attr","skuJson_0","productId","userMail","userWlId","userWishlist","settings","url","method","timeout","headers","Accept","Content-Type","ajax","done","user","IsUserDefined","Email","userWl","length","id","localStorage","getItem","accept","contentType","crossDomain","type","success","b","wishlistIds","split","setInterval","each","this","addClass","wladdid","i","on","w","email","data","JSON","stringify","DocumentId","setItem","alert","idremove","newwl","replace","removeClass","a","shelfWishlist","wishlistPage","console","log","text","insertAfter","p","productUrl","link","productName","productImgUrl","items","images","imageUrl","productBestPrice","productInstallmentN","productInstallmentV","sellers","commertialOffer","Price","AvailableQuantity","li","PaymentOptions","installmentOptions","installments","count","value","toString","toFixed","idreplace","product","parents","remove","document","ready"],"mappings":"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","file":"common.js","sourcesContent":["function minicart(){\r\n\t$(\"header .mycart > a\").click(function(ev){\r\n\t\tev.preventDefault();\r\n\t\t$(\".vtexsc-cart\").toggleClass(\"active\");\r\n\t\t$(\".cartCheckout\").click(function(){\r\n\t\t\twindow.location=\"/checkout\";\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction wishlist(){\r\n\r\n  if($(\"body\").hasClass(\"produto\")){\r\n  \tif(window.innerWidth > 1024){\r\n  \t\t$(\".wl-add\").appendTo(\".infos\");\r\n  \t}\r\n    $(\".wl-add\").attr(\"data-id\",skuJson_0.productId);\r\n  }\r\n\r\n  var userWlId = \"empty\";\r\n  var userWishlist = \"empty\";\r\n  var userMail;\r\n\r\n  var settings = {\r\n    \"url\": \"/no-cache/profileSystem/getProfile\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": 0,\r\n    \"headers\": {\r\n      \"Accept\": \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n  };\r\n\r\n  $.ajax(settings).done(function (user) {\r\n    if(user.IsUserDefined){\r\n    userMail = user.Email;\r\n    var settings = {\r\n      \"url\": \"/api/dataentities/WL/search?email=\"+user.Email+\"&_fields=id,email,wishlist\",\r\n      \"method\": \"GET\",\r\n      \"timeout\": 0,\r\n      \"headers\": {\r\n        \"Accept\": \"application/json\",\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n    };\r\n\r\n    $.ajax(settings).done(function (userWl) {\r\n      if(userWl.length > 0){\r\n        userWlId = userWl[0].id;\r\n      }\r\n      else{\r\n        if(localStorage.getItem(\"wlid\")){\r\n          userWlId = localStorage.getItem(\"wlid\");\r\n        }\r\n        // else{\r\n        //   console.log(\"Nada encontrado nem no MD nem no localstorage\");\r\n        // }\r\n      }\r\n\r\n      $.ajax({\r\n        accept: \"application/vnd.vtex.ds.v10+json\",\r\n        contentType: \"application/json; charset=utf-8\",\r\n        crossDomain: !0,\r\n        type: \"GET\",\r\n        url: \"/api/dataentities/WL/documents/\"+userWlId+\"?_fields=wishlist\",\r\n        success: function(b) {\r\n          userWishlist = b.wishlist;\r\n          var wishlistIds = b.wishlist.split(\"-\");\r\n\r\n          var sfp = setInterval(function(){\r\n            $(\".wl-add:not(.checked)\").each(function(){\r\n              $(this).addClass(\"checked\");\r\n              \r\n              var wladdid = $(this).attr(\"data-id\");\r\n\r\n              for(var i = 0; i < wishlistIds.length; i++){\r\n                if(wladdid === wishlistIds[i]){\r\n                  $(this).addClass(\"wl-added\");\r\n                }\r\n              }\r\n\r\n            });\r\n          },500);\r\n\r\n        }\r\n      });\r\n\r\n    });\r\n  }\r\n  else{\r\n    userWlId = 'noUser';\r\n  }\r\n\r\n  });\r\n\r\n\r\n\r\n  // NA HORA DE ADICIONAR\r\n\r\n  $(\"body\").on(\"click\",\".wl-add\",function(ev){\r\n    if(userWlId === 'empty'){\r\n        var w = {};\r\n        w.email = userMail;\r\n        w.wishlist = \"-\"+$(this).attr(\"data-id\");\r\n\r\n       $.ajax({\r\n        accept: \"application/vnd.vtex.ds.v10+json\",\r\n        contentType: \"application/json; charset=utf-8\",\r\n        crossDomain: !0,\r\n        data: JSON.stringify(w),\r\n        type: \"PATCH\",\r\n        url: \"/api/dataentities/WL/documents\",\r\n        success: function(b) {\r\n          userWlId = b.DocumentId;\r\n          userWishlist = w.wishlist;\r\n          localStorage.setItem(\"wlid\",b.DocumentId);\r\n        }\r\n      });\r\n    }\r\n    else if(userWlId === 'noUser'){\r\n      alert(\"VocÃª precisa estar logado para adicionar um produto a sua wishlist.\");\r\n    }\r\n    else{\r\n      if($(this).hasClass(\"wl-added\")){\r\n\r\n        var idremove = \"-\"+$(this).attr(\"data-id\");\r\n        var newwl = userWishlist.replace(idremove,\"\");\r\n        $(this).removeClass(\"wl-added\");\r\n\r\n        var w = {};\r\n        w.email = userMail;\r\n        w.wishlist = newwl;\r\n\r\n         $.ajax({\r\n          accept: \"application/vnd.vtex.ds.v10+json\",\r\n          contentType: \"application/json; charset=utf-8\",\r\n          crossDomain: !0,\r\n          data: JSON.stringify(w),\r\n          type: \"PATCH\",\r\n          url: \"/api/dataentities/WL/documents/\"+userWlId,\r\n          success: function(a) {\r\n            userWishlist = w.wishlist;\r\n          }\r\n        });\r\n\r\n      }\r\n      else{\r\n        $(this).addClass(\"wl-added\");\r\n\r\n        var w = {};\r\n        w.email = userMail;\r\n        w.wishlist = userWishlist + \"-\"+$(this).attr(\"data-id\");\r\n\r\n         $.ajax({\r\n          accept: \"application/vnd.vtex.ds.v10+json\",\r\n          contentType: \"application/json; charset=utf-8\",\r\n          crossDomain: !0,\r\n          data: JSON.stringify(w),\r\n          type: \"PATCH\",\r\n          url: \"/api/dataentities/WL/documents/\"+userWlId,\r\n          success: function(a) {\r\n            userWishlist = w.wishlist;\r\n          }\r\n        });\r\n      }\r\n\r\n    }\r\n  });\r\n\r\n}\r\n\r\nfunction shelfWishlist(){\r\n\t$(\".shelf .addWishlist\").click(function(ev){\r\n\t\tev.preventDefault();\r\n\t\t$(this).addClass(\"added\");\r\n\t});\r\n}\r\n\r\nfunction wishlistPage(){\r\n\tif($(\"body\").hasClass(\"wishlist\")){\r\n\t\tvar userWlId = \"empty\";\r\n\t\tvar userWishlist = \"empty\";\r\n\t\tvar userMail;\r\n\r\n\t\tvar settings = {\r\n\t\t  \"url\": \"/no-cache/profileSystem/getProfile\",\r\n\t\t  \"method\": \"GET\",\r\n\t\t  \"timeout\": 0,\r\n\t\t  \"headers\": {\r\n\t\t    \"Accept\": \"application/json\",\r\n\t\t    \"Content-Type\": \"application/json\"\r\n\t\t  },\r\n\t\t};\r\n\r\n\t\t$.ajax(settings).done(function (user) {\r\n\t\t\tconsole.log(\"user\",user);\r\n\t\t\tif(user.IsUserDefined === false && localStorage.getItem(\"wlid\").length < 2){\r\n\t\t\t\t$(\".content > h2\").text(\"FaÃ§a login para visualizar a sua wishlist.\");\r\n\t\t\t\t$(\"<a href='/login' style='display:block;border: 1px solid #000;float: left;padding: 6px 16px;margin-top: 12px;border-radius: 2px;'>Fazer login</a>\").insertAfter(\".content > h2\");\r\n\t\t\t}\r\n\t\t  userMail = user.Email;\r\n\t\t  var settings = {\r\n\t\t    \"url\": \"/api/dataentities/WL/search?email=\"+user.Email+\"&_fields=id,email,wishlist\",\r\n\t\t    \"method\": \"GET\",\r\n\t\t    \"timeout\": 0,\r\n\t\t    \"headers\": {\r\n\t\t      \"Accept\": \"application/json\",\r\n\t\t      \"Content-Type\": \"application/json\"\r\n\t\t    },\r\n\t\t  };\r\n\r\n\t\t  $.ajax(settings).done(function (userWl) {\r\n\t\t    if(userWl.length > 0){\r\n\t\t      userWlId = userWl[0].id;\r\n\t\t    }\r\n\t\t    else{\r\n\t\t      if(localStorage.getItem(\"wlid\")){\r\n\t\t        userWlId = localStorage.getItem(\"wlid\");\r\n\t\t      }\r\n\t\t      else{\r\n\t\t        console.log(\"Nada encontrado nem no MD nem no localstorage\");\r\n\t\t      }\r\n\t\t    }\r\n\r\n\t\t    $.ajax({\r\n\t\t      accept: \"application/vnd.vtex.ds.v10+json\",\r\n\t\t      contentType: \"application/json; charset=utf-8\",\r\n\t\t      crossDomain: !0,\r\n\t\t      type: \"GET\",\r\n\t\t      url: \"/api/dataentities/WL/documents/\"+userWlId+\"?_fields=wishlist\",\r\n\t\t      success: function(b) {\r\n\t\t        userWishlist = b.wishlist;\r\n\t\t        var wishlistIds = b.wishlist.split(\"-\");\r\n\t\t        console.log(\"wishlist\",wishlistIds);\r\n\t\t        for(var i = 0; i < wishlistIds.length; i++){\r\n\t\t        \t$.ajax({\r\n\t\t        \t  accept: \"application/vnd.vtex.ds.v10+json\",\r\n\t\t        \t  contentType: \"application/json; charset=utf-8\",\r\n\t\t        \t  crossDomain: !0,\r\n\t\t        \t  type: \"GET\",\r\n\t\t        \t  url: \"/api/catalog_system/pub/products/search/?fq=productId:\"+wishlistIds[i],\r\n\t\t        \t  success: function(p) {\r\n\t\t        \t  \tconsole.log(\"product\",p[0]);\r\n\r\n\t\t        \t  \tlet productId = p[0].productId;\r\n\t\t        \t  \tlet productUrl = p[0].link;\r\n\t\t        \t  \tlet productName = p[0].productName;\r\n\t\t        \t  \tlet productImgUrl = p[0].items[0].images[0].imageUrl;\r\n\t\t        \t  \tlet productBestPrice = \"\";\r\n\t\t        \t  \tlet productInstallmentN = \"\";\r\n\t\t        \t  \tlet productInstallmentV = \"\";\r\n\r\n\t\t        \t  \tfor(var i = 0; i < p[0].items.length; i++){\r\n\t\t        \t  \t\tif(p[0].items[i].sellers[0].commertialOffer.Price !== 0 && p[0].items[i].sellers[0].commertialOffer.AvailableQuantity > 0){\r\n\t\t        \t  \t\t\t//$(a+\" .bikiniInfos__item-price\").html(\"R$: \"+p[0].items[i].sellers[0].commertialOffer.Price.toFixed(2).replace(\".\",\",\"));\r\n\t\t        \t  \t\t\tproductBestPrice = p[0].items[i].sellers[0].commertialOffer.Price;\r\n\t\t        \t  \t\t\t//productBestPrice = productBestPrice.replace(\".\",\",\");\r\n\t\t        \t  \t\t\r\n\t\t        \t  \t\t\tvar li = (p[0].items[i].sellers[0].commertialOffer.PaymentOptions.installmentOptions[0].installments);\r\n\r\n\t\t        \t  \t\t\tproductInstallmentN = li[li.length-1].count;\r\n\t\t        \t  \t\t\tproductInstallmentV = li[li.length-1].value;\r\n\r\n\t\t        \t  \t\t}\r\n\t\t        \t  \t}\r\n\r\n\t\t        \t  \tproductBestPrice = productBestPrice.toString().replace(\".\",\",\");\r\n\t\t        \t  \tproductInstallmentV = (productInstallmentV/100).toFixed(2).replace(\".\",\",\");\r\n\r\n\t\t        \t  \tvar idreplace = productImgUrl.split(\"/ids/\")[1].split(\"/\")[0];\r\n\r\n\t\t        \t  \tproductImgUrl = productImgUrl.replace(idreplace,idreplace+\"-450-450\");\r\n\r\n\t\t        \t  \tlet product = `<div class=\"wishlistProduct\">\r\n\t\t        \t  \t<a href=\"javascript:void(0)\" class=\"wl-remove\" data-id=\"${productId}\"></a>\r\n\t\t        \t  \t<a href=\"${productUrl}\" class=\"wishlistProduct__link\">\r\n\t\t        \t  \t<img src=\"${productImgUrl}\" />\r\n\t\t        \t  \t<p class=\"wishlistProduct__name\">${productName}</p>\r\n\t\t        \t  \t<p class=\"wishlistProduct__price\">R$ ${productBestPrice}</p>\r\n\t\t        \t  \t<p class=\"wishlistProduct__instPrice\">${productInstallmentN}x de R$ ${productInstallmentV} sem juros</p></a>\r\n\t\t        \t  \t</div>`;\r\n\r\n\t\t        \t  \t$(product).appendTo(\".shelfWishlist\");\r\n\r\n\t\t        \t  }\r\n\t\t        \t});\r\n\t\t        }\r\n\t\t      }\r\n\t\t    });\r\n\r\n\t\t  });\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t$(\"body\").on(\"click\",\".wl-remove\",function(){\r\n\r\n\t\tvar userWlId = \"empty\";\r\n\t\tvar userWishlist = \"empty\";\r\n\t\tvar userMail;\r\n\r\n\t\t$(this).parents(\".wishlistProduct\").remove();\r\n\r\n\t\tvar idremove = \"-\"+$(this).attr(\"data-id\");\r\n\r\n\t\tvar settings = {\r\n\t\t  \"url\": \"/no-cache/profileSystem/getProfile\",\r\n\t\t  \"method\": \"GET\",\r\n\t\t  \"timeout\": 0,\r\n\t\t  \"headers\": {\r\n\t\t    \"Accept\": \"application/json\",\r\n\t\t    \"Content-Type\": \"application/json\"\r\n\t\t  },\r\n\t\t};\r\n\r\n\t\t$.ajax(settings).done(function (user) {\r\n\t\t  userMail = user.Email;\r\n\t\t  var settings = {\r\n\t\t    \"url\": \"/api/dataentities/WL/search?email=\"+user.Email+\"&_fields=id,email,wishlist\",\r\n\t\t    \"method\": \"GET\",\r\n\t\t    \"timeout\": 0,\r\n\t\t    \"headers\": {\r\n\t\t      \"Accept\": \"application/json\",\r\n\t\t      \"Content-Type\": \"application/json\"\r\n\t\t    },\r\n\t\t  };\r\n\r\n\t\t  $.ajax(settings).done(function (userWl) {\r\n\t\t    if(userWl.length > 0){\r\n\t\t      userWlId = userWl[0].id;\r\n\t\t    }\r\n\t\t    else{\r\n\t\t      if(localStorage.getItem(\"wlid\")){\r\n\t\t        userWlId = localStorage.getItem(\"wlid\");\r\n\t\t      }\r\n\t\t      else{\r\n\t\t        console.log(\"Nada encontrado nem no MD nem no localstorage\");\r\n\t\t      }\r\n\t\t    }\r\n\r\n\t\t    $.ajax({\r\n\t\t      accept: \"application/vnd.vtex.ds.v10+json\",\r\n\t\t      contentType: \"application/json; charset=utf-8\",\r\n\t\t      crossDomain: !0,\r\n\t\t      type: \"GET\",\r\n\t\t      url: \"/api/dataentities/WL/documents/\"+userWlId+\"?_fields=wishlist\",\r\n\t\t      success: function(b) {\r\n\t\t        userWishlist = b.wishlist;\r\n\t\t        var newwl = userWishlist.replace(idremove,\"\");\r\n\t\t        $(this).removeClass(\"wl-added\");\r\n\r\n\t\t        var w = {};\r\n\t\t        w.email = userMail;\r\n\t\t        w.wishlist = newwl;\r\n\r\n\t\t         $.ajax({\r\n\t\t          accept: \"application/vnd.vtex.ds.v10+json\",\r\n\t\t          contentType: \"application/json; charset=utf-8\",\r\n\t\t          crossDomain: !0,\r\n\t\t          data: JSON.stringify(w),\r\n\t\t          type: \"PATCH\",\r\n\t\t          url: \"/api/dataentities/WL/documents/\"+userWlId,\r\n\t\t          success: function(a) {\r\n\t\t            userWishlist = newwl;\r\n\t\t          }\r\n\t\t        });\r\n\r\n\t\t      }\r\n\t\t    });\r\n\t\t  });\r\n\t\t});\r\n\r\n\r\n\t\t\r\n\r\n\t\t//  $.ajax({\r\n\t\t//   accept: \"application/vnd.vtex.ds.v10+json\",\r\n\t\t//   contentType: \"application/json; charset=utf-8\",\r\n\t\t//   crossDomain: !0,\r\n\t\t//   data: JSON.stringify(w),\r\n\t\t//   type: \"PATCH\",\r\n\t\t//   url: \"/api/dataentities/WL/documents/\"+userWlId,\r\n\t\t//   success: function(a) {\r\n\t\t//     userWishlist = w.wishlist;\r\n\t\t//   }\r\n\t\t// });\r\n\r\n\t});\r\n\t\r\n}\r\n\r\n$(document).ready(function(){\r\n\tminicart();\r\n\twishlist();\r\n\tshelfWishlist();\r\n\twishlistPage();\r\n});"]}