"use strict";function minicart(){$("header .mycart > a").click(function(t){t.preventDefault(),$(".vtexsc-cart").toggleClass("active"),$(".cartCheckout").click(function(){window.location="/checkout"})})}function wishlist(){$("body").hasClass("produto")&&(window.innerWidth>1024&&$(".wl-add").appendTo(".infos"),$(".wl-add").attr("data-id",skuJson_0.productId));var t,e="empty",a="empty",i={url:"/no-cache/profileSystem/getProfile",method:"GET",timeout:0,headers:{Accept:"application/json","Content-Type":"application/json"}};$.ajax(i).done(function(i){if(i.IsUserDefined){t=i.Email;var s={url:"/api/dataentities/WL/search?email="+i.Email+"&_fields=id,email,wishlist",method:"GET",timeout:0,headers:{Accept:"application/json","Content-Type":"application/json"}};$.ajax(s).done(function(t){t.length>0?e=t[0].id:localStorage.getItem("wlid")&&(e=localStorage.getItem("wlid")),$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,type:"GET",url:"/api/dataentities/WL/documents/"+e+"?_fields=wishlist",success:function(t){a=t.wishlist;var e=t.wishlist.split("-");setInterval(function(){$(".wl-add:not(.checked)").each(function(){$(this).addClass("checked");for(var t=$(this).attr("data-id"),a=0;a<e.length;a++)t===e[a]&&$(this).addClass("wl-added")})},500)}})})}else e="noUser"}),$("body").on("click",".wl-add",function(i){if("empty"===e){var s={};s.email=t,s.wishlist="-"+$(this).attr("data-id"),$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(s),type:"PATCH",url:"/api/dataentities/WL/documents",success:function(t){e=t.DocumentId,a=s.wishlist,localStorage.setItem("wlid",t.DocumentId)}})}else if("noUser"===e)alert("Você precisa estar logado para adicionar um produto a sua wishlist.");else if($(this).hasClass("wl-added")){var n="-"+$(this).attr("data-id"),o=a.replace(n,"");$(this).removeClass("wl-added");var s={};s.email=t,s.wishlist=o,$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(s),type:"PATCH",url:"/api/dataentities/WL/documents/"+e,success:function(t){a=s.wishlist}})}else{$(this).addClass("wl-added");var s={};s.email=t,s.wishlist=a+"-"+$(this).attr("data-id"),$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(s),type:"PATCH",url:"/api/dataentities/WL/documents/"+e,success:function(t){a=s.wishlist}})}})}function shelfWishlist(){$(".shelf .addWishlist").click(function(t){t.preventDefault(),$(this).addClass("added")})}function wishlistPage(){if($("body").hasClass("wishlist")){var t,e="empty",a="empty",i={url:"/no-cache/profileSystem/getProfile",method:"GET",timeout:0,headers:{Accept:"application/json","Content-Type":"application/json"}};$.ajax(i).done(function(i){console.log("user",i),i.IsUserDefined===!1&&localStorage.getItem("wlid").length<2&&($(".content > h2").text("Faça login para visualizar a sua wishlist."),$("<a href='/login' style='display:block;border: 1px solid #000;float: left;padding: 6px 16px;margin-top: 12px;border-radius: 2px;'>Fazer login</a>").insertAfter(".content > h2")),t=i.Email;var s={url:"/api/dataentities/WL/search?email="+i.Email+"&_fields=id,email,wishlist",method:"GET",timeout:0,headers:{Accept:"application/json","Content-Type":"application/json"}};$.ajax(s).done(function(t){t.length>0?e=t[0].id:localStorage.getItem("wlid")?e=localStorage.getItem("wlid"):console.log("Nada encontrado nem no MD nem no localstorage"),$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,type:"GET",url:"/api/dataentities/WL/documents/"+e+"?_fields=wishlist",success:function(t){a=t.wishlist;var e=t.wishlist.split("-");console.log("wishlist",e);for(var i=0;i<e.length;i++)$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+e[i],success:function(t){console.log("product",t[0]);for(var e=t[0].productId,a=t[0].link,i=t[0].productName,s=t[0].items[0].images[0].imageUrl,n="",o="",l="",c=0;c<t[0].items.length;c++)if(0!==t[0].items[c].sellers[0].commertialOffer.Price&&t[0].items[c].sellers[0].commertialOffer.AvailableQuantity>0){n=t[0].items[c].sellers[0].commertialOffer.Price;var d=t[0].items[c].sellers[0].commertialOffer.PaymentOptions.installmentOptions[0].installments;o=d[d.length-1].count,l=d[d.length-1].value}n=n.toString().replace(".",","),l=(l/100).toFixed(2).replace(".",",");var r=s.split("/ids/")[1].split("/")[0];s=s.replace(r,r+"-450-450");var p='<div class="wishlistProduct">\n\t\t        \t  \t<a href="javascript:void(0)" class="wl-remove" data-id="'+e+'"></a>\n\t\t        \t  \t<a href="'+a+'" class="wishlistProduct__link">\n\t\t        \t  \t<img src="'+s+'" />\n\t\t        \t  \t<p class="wishlistProduct__name">'+i+'</p>\n\t\t        \t  \t<p class="wishlistProduct__price">R$ '+n+'</p>\n\t\t        \t  \t<p class="wishlistProduct__instPrice">'+o+"x de R$ "+l+" sem juros</p></a>\n\t\t        \t  \t</div>";$(p).appendTo(".shelfWishlist")}})}})})})}$("body").on("click",".wl-remove",function(){var t,e="empty",a="empty";$(this).parents(".wishlistProduct").remove();var i="-"+$(this).attr("data-id"),s={url:"/no-cache/profileSystem/getProfile",method:"GET",timeout:0,headers:{Accept:"application/json","Content-Type":"application/json"}};$.ajax(s).done(function(s){t=s.Email;var n={url:"/api/dataentities/WL/search?email="+s.Email+"&_fields=id,email,wishlist",method:"GET",timeout:0,headers:{Accept:"application/json","Content-Type":"application/json"}};$.ajax(n).done(function(s){s.length>0?e=s[0].id:localStorage.getItem("wlid")?e=localStorage.getItem("wlid"):console.log("Nada encontrado nem no MD nem no localstorage"),$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,type:"GET",url:"/api/dataentities/WL/documents/"+e+"?_fields=wishlist",success:function(s){a=s.wishlist;var n=a.replace(i,"");$(this).removeClass("wl-added");var o={};o.email=t,o.wishlist=n,$.ajax({accept:"application/vnd.vtex.ds.v10+json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(o),type:"PATCH",url:"/api/dataentities/WL/documents/"+e,success:function(t){a=n}})}})})})})}$(document).ready(function(){minicart(),wishlist(),shelfWishlist(),wishlistPage()});
//# sourceMappingURL=common.js.map
